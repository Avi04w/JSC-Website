<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Data Analysis (EDA): Station and Delay Analysis</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>







<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">JSC370 Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="eda.html">EDA</a>
</li>
<li>
  <a href="prediction.html">Predictive Modelling</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Avi04w/JSC-Website">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Exploratory Data Analysis (EDA): Station
and Delay Analysis</h1>

</div>


<p>To understand the nature of the subway delays, the following initial
analyses were performed:</p>
<ul>
<li><strong>Summary Statistics:</strong>
<ul>
<li>Calculated the total number of delays and average delay duration at
each station.</li>
<li>Identified the most common delay causes and their frequency.</li>
</ul></li>
<li><strong>Visualizations:</strong>
<ul>
<li><strong>Treemap:</strong> Delay reasons visualized in proportional
blocks.</li>
<li><strong>Bar Chart:</strong> Number of delays per subway line and
station.</li>
</ul></li>
<li><strong>Time-Based Analysis:</strong>
<ul>
<li>Created peak (7-9 AM, 3-7 PM) vs non-peak delay summaries.</li>
<li>Examined how delay frequencies change by the hour.</li>
</ul></li>
</ul>
<div id="prelimary-results" class="section level2 tabset">
<h2 class="tabset">Prelimary Results</h2>
<div id="delays-per-station" class="section level3">
<h3>Delays Per Station</h3>
<p><img src="eda_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>We can see that Bloor, Kennedy, Kipling, Finch, Dundas, Eglinton, and
VMC stations have the highest number of delays. These are all either
terminal stations (Finch, Kennedy, Kipling, and VMC) or are the highest
traffic stations which see the most passengers (Dundas and Eglinton). We
can also see that more Yonge-University line stations have have a large
amount of delays. No stations from the Sheppard line made this list. We
can further look into this by exploring the types of delays that are
occurring at stations.</p>
</div>
<div id="reasons-for-delay" class="section level3">
<h3>Reasons For Delay</h3>
<p><img src="eda_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<table style="width:100%;">
<caption>Top 10 Most Frequent Delay Causes</caption>
<colgroup>
<col width="70%" />
<col width="7%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Delay Code</th>
<th align="right">Count</th>
<th align="right">Average Delay Time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Disorderly Patron</td>
<td align="right">3405</td>
<td align="right">2.5013216</td>
</tr>
<tr class="even">
<td align="left">Injured or ill Customer (In Station) - Transported</td>
<td align="right">2680</td>
<td align="right">0.0742537</td>
</tr>
<tr class="odd">
<td align="left">Passenger Other</td>
<td align="right">2508</td>
<td align="right">2.3257576</td>
</tr>
<tr class="even">
<td align="left">Passenger Assistance Alarm Activated - No Trouble
Found</td>
<td align="right">1713</td>
<td align="right">2.0811442</td>
</tr>
<tr class="odd">
<td align="left">Injured or ill Customer (In Station) - Medical Aid
Refused</td>
<td align="right">1486</td>
<td align="right">0.1130552</td>
</tr>
<tr class="even">
<td align="left">OPTO (COMMS) Train Door Monitoring</td>
<td align="right">1452</td>
<td align="right">3.4765840</td>
</tr>
<tr class="odd">
<td align="left">Miscellaneous Other</td>
<td align="right">1019</td>
<td align="right">1.4533857</td>
</tr>
<tr class="even">
<td align="left">Escalator/Elevator Incident</td>
<td align="right">832</td>
<td align="right">0.0144231</td>
</tr>
<tr class="odd">
<td align="left">Injured or ill Customer (On Train) - Medical Aid
Refused</td>
<td align="right">807</td>
<td align="right">5.1846344</td>
</tr>
<tr class="even">
<td align="left">Unauthorized at Track Level</td>
<td align="right">721</td>
<td align="right">7.7711512</td>
</tr>
</tbody>
</table>
<p>The top reasons for subway delays in Toronto seem to be
passenger-related incidents, with “Disorderly Patron” being the most
frequent cause, accounting for 3405 delays with an average delay of 2.5
minutes. Other notable causes include Injured or Ill Customers (2680
delays, 0.07 min avg), Passenger Assistance Alarm Activated (1713
delays, 2.08 min avg) and Train Door Monitoring (1452 delays, 3.48 min
avg).</p>
</div>
<div id="total-delay-time" class="section level3">
<h3>Total Delay Time</h3>
<p><img src="eda_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<table>
<caption>Delay Code Definitions</caption>
<thead>
<tr class="header">
<th align="left">Code</th>
<th align="left">Code Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SUDP</td>
<td align="left">Disorderly Patron</td>
</tr>
<tr class="even">
<td align="left">SUO</td>
<td align="left">Passenger Other</td>
</tr>
<tr class="odd">
<td align="left">SUUT</td>
<td align="left">Unauthorized at Track Level</td>
</tr>
<tr class="even">
<td align="left">PUOPO</td>
<td align="left">OPTO (COMMS) Train Door Monitoring</td>
</tr>
<tr class="odd">
<td align="left">MUI</td>
<td align="left">Injured or ill Customer (On Train) - Transported</td>
</tr>
<tr class="even">
<td align="left">MUIR</td>
<td align="left">Injured or ill Customer (On Train) - Medical Aid
Refused</td>
</tr>
<tr class="odd">
<td align="left">MUPAA</td>
<td align="left">Passenger Assistance Alarm Activated - No Trouble
Found</td>
</tr>
<tr class="even">
<td align="left">MUPR1</td>
<td align="left">Priority One - Train in Contact With Person</td>
</tr>
<tr class="odd">
<td align="left">MUSAN</td>
<td align="left">Unsanitary Vehicle</td>
</tr>
<tr class="even">
<td align="left">MUPLB</td>
<td align="left">Fire/Smoke Plan B - Source TTC</td>
</tr>
</tbody>
</table>
<p>The top delay causes by total delay time highlight disorderly patrons
as the most significant issue, causing over 8,000 minutes of delays
throughout the year. Other major contributors include unauthorized
people at track level, train door monitoring and injured or ill
customers, each accumulating several hundred minutes of delays.
Passenger-related incidents, including assaults, alarms, and other
disruptions, collectively contribute to substantial downtime. The
difference we see with this and the last visualization is that a few of
the most commonly occurring delays, such as injured passengers in the
station (not the trains), and elevator/escalator incidents are not in
the top 10 of total delay time since the average time for those delays
is much less.</p>
</div>
<div id="time-of-day-of-delays" class="section level3">
<h3>Time of Day of Delays</h3>
<p><img src="eda_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<table>
<caption>Delays During Peak vs Non-Peak Hours</caption>
<colgroup>
<col width="16%" />
<col width="14%" />
<col width="29%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Time Category</th>
<th align="right">Total Delays</th>
<th align="right">Average Delay Time (mins)</th>
<th align="right">Average Number of Delays per Hour</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Non-Peak</td>
<td align="right">15053</td>
<td align="right">2.77</td>
<td align="right">1075.214</td>
</tr>
<tr class="even">
<td align="left">Peak</td>
<td align="right">10089</td>
<td align="right">3.03</td>
<td align="right">1261.125</td>
</tr>
</tbody>
</table>
<p>Figure 4 shows the occurrence of delays distributed by the time of
day at which they occur. The peak hours are based on the official TTC
rush hour times when train service is increased. There is a significant
jump in the number of delays during the rush hours as well as late at
night at 11pm. What is interesting is that while the number of delays is
much higher during peak hours, the average time of each delay is almost
the same (they only differ by about 15 seconds).</p>
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>This analysis of TTC subway delays has provided several key insights
into delay causes, timing patterns, and station-specific trends. The
most frequent delay and the delay that has wasted the most amount of
time this year is <strong>Disorderly Patrons</strong>, accounting for
3405 recorded delays and taking a total of 8517 hours, much more than
any other delay type. Other common delay types include passenger
assistance alarms being activated, train door monitoring issues, and
medical emergencies. However, when examining total delay time,
disruptions such as unauthorized people at track level and injured or
ill customer on train incidents accumulate significantly more system
downtime, despite occurring less frequently.</p>
<p>In terms of time-based patters, delays are more frequent during peak
hours (7-9 AM, 3-7 PM) when the TTC is running more trains, with a
noticeable spike between 4 and 6 PM. Interestingly, while peak hours
have more delays, the average duration of each delay is similar to
non-peak periods, suggestions that the nature of delays remains
relatively consistent through the day. Additionally, certain stations
such as Kipling, Bloor, Kennedy and Finch experience the highest number
of delays, many of which are near major transfer or terminal
stations.</p>
</div>

<p>Copyright &copy; 2025. Avi Walia.</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
